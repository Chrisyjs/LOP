(window.webpackJsonp=window.webpackJsonp||[]).push([["ClaimDetail"],{"0904":function(t,e,a){"use strict";var n={props:{item:{type:Object,default:function(){return{}}}}},i=(a("292b"),a("2877")),r=Object(i.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel"},[t._t("header"),t._l(t.item.itemList,function(t){return a("van-card",{key:t.id,attrs:{num:t.amount,price:t.payPrice,desc:"",title:t.name,thumb:t.imageUrl||"https://img.yzcdn.cn/vant/t-thirt.jpg"}})}),a("div",{staticClass:"total-pay"},[a("span",{staticClass:"count font-size-12"},[t._v("共"+t._s(t.item.itemAmount)+"件商品")]),a("span",[a("span",{staticClass:"font-size-12"},[t._v("合计：")]),a("span",{staticClass:"money"},[t._v("￥"+t._s(Number(t.item.payMoney).toFixed(1)))])])]),t._t("footer")],2)},[],!1,null,"42c17472",null);e.a=r.exports},"292b":function(t,e,a){"use strict";var n=a("a18c");a.n(n).a},"365c":function(t,e,a){"use strict";a.d(e,"e",function(){return r}),a.d(e,"g",function(){return s}),a.d(e,"f",function(){return o}),a.d(e,"b",function(){return c}),a.d(e,"d",function(){return u}),a.d(e,"c",function(){return d}),a.d(e,"i",function(){return l}),a.d(e,"h",function(){return f}),a.d(e,"a",function(){return m});var n=a("0244"),i=(a("4328"),"http://www.landofpromise.co:8080/".concat("lop_project_house"));function r(t){return n.a.post("".concat(i,"/api/crowdfunding/login/get/code"),t)}function s(t){return n.a.post("".concat(i,"/api/crowdfunding/login"),t)}function o(){return n.a.get("".concat(i,"/api/crowdfunding/item/Unclaim/list"))}function c(t){return n.a.post("".concat(i,"/api/crowdfunding/order/submit"),t)}function u(t){return n.a.post("".concat(i,"/api/crowdfunding/order/list"),t)}function d(t){return n.a.get("".concat(i,"/api/crowdfunding/order/detail/").concat(t))}function l(t){return n.a.post("".concat(i,"/api/crowdfunding/upload/single/file"),t)}function f(t){return n.a.post("".concat(i,"/api/crowdfunding/order/pay"),t)}function m(t){return n.a.post("".concat(i,"/api/crowdfunding/order/cancel/").concat(t))}},9026:function(t,e,a){"use strict";a.r(e);a("96cf");var n,i,r=a("3b8d"),s=a("0904"),o=a("1f8c"),c=a("365c"),u={data:function(){return{detail:{},id:this.$route.query.id,iLopAlipay:"onemore6@landofpromise.co",bankCard:"6236681540019117469",payVouchers:[],images:[],remark:""}},computed:{orderStatusIsOne:function(){return 1===this.detail.orderStatus}},components:{OrderPanel:s.a},mixins:[o.a],created:function(){var t=this;this._getClaimDetail().then(function(){t.orderStatusIsOne&&t.isWeiXinEnv&&t.$notify({message:"如遇问题，可尝试用浏览器打开",type:"primary"})})},mounted:function(){},methods:{_getClaimDetail:(i=Object(r.a)(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.c)(this.id);case 2:e=t.sent,e.code,a=e.data,this.detail=a,this.setOverflowScrollHeight();case 7:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)}),handleClickLeft:function(){this.$router.push({path:"/home/myList"})},checkSubmitInfo:function(){var t="";return this.remark||(t="请输入备注信息"),this.payVouchers.length||(t="请上传您的付款凭证"),!t||(this.$notify({message:t,type:"warning"}),!1)},handleSubmit:(n=Object(r.a)(regeneratorRuntime.mark(function t(){var e,a,n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkSubmitInfo()){t.next=2;break}return t.abrupt("return");case 2:return(e=new FormData).append("mulFile",this.payVouchers[0].file),this.$toast({message:"提交中...",mask:!0,loadingType:"spinner",duration:0,forbidClick:!0}),t.next=7,Object(c.i)(e);case 7:if(a=t.sent,n=a.code,i=a.data,200===n)return e={orderId:this.detail.orderId,payImageUrl:i,remark:this.remark},t.next=14,Object(c.h)(e);t.next=16;break;case 14:200===t.sent.code&&(this.$toast.clear(),this.$dialog.alert({title:"系统提示",message:"已完成认领！\n感谢您的认领，每笔认领都会用于新家建设并载入LOP史册！"}),this.$router.push({path:"/home/myList"}));case 16:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})}},d=(a("ad04"),a("2877")),l=Object(d.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-nav-bar",{staticClass:"fixed-header",attrs:{"left-arrow":"","left-text":"返回",title:"认领详情"},on:{"click-left":e.handleClickLeft}}),a("div",{staticClass:"claim-detail overflow-scroll"},[a("order-panel",{attrs:{item:e.detail},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title",attrs:{flex:"main:justify cross:center"}},[a("div",[e._v("认领编号："+e._s(e.detail.orderCode))]),a("div",[e._v("订单状态："+e._s(e.detail.orderStatusName))])])]},proxy:!0}])}),a("div",{staticClass:"order-info panel"},[a("div",{staticClass:"title font-size-14"},[e._v("订单信息")]),a("div",{staticClass:"content font-size-12"},[a("div",{staticClass:"item"},[e._v("订单创建时间："+e._s(e.detail.timeSubmit))]),e.detail.timePay?a("div",{staticClass:"item"},[e._v("订单付款时间："+e._s(e.detail.timePay))]):e._e(),e.detail.timeAudit?a("div",{staticClass:"item"},[e._v("订单确认时间："+e._s(e.detail.timeAudit))]):e._e()])]),a("div",{staticClass:"form-info panel"},[a("div",{staticClass:"title font-size-14"},[e._v("提交信息")]),a("div",{staticClass:"content font-size-12"},[a("div",{staticClass:"item",attrs:{flex:"main:left cross:center"}}),a("div",{staticClass:"item",attrs:{flex:"main:left cross:top"}},[a("label",{class:[e.orderStatusIsOne&&"form-required"]},[e._v("\n            您的付款凭证：\n            "),a("br"),a("span",{staticStyle:{opacity:".7"}},[e._v("（即账单截图）")])]),e.orderStatusIsOne?[a("van-uploader",{attrs:{"max-count":1},model:{value:e.payVouchers,callback:function(t){e.payVouchers=t},expression:"payVouchers"}})]:[a("img",{staticStyle:{width:"78px",height:"78px"},attrs:{src:e.detail.payImageUrl,alt:""},on:{click:function(){return e.setImagePreview([e.detail.payImageUrl])}}})]],2),a("div",{staticClass:"item",attrs:{flex:"main:left cross:top"}},[a("label",{class:[e.orderStatusIsOne&&"form-required"]},[e._v("您的备注信息：")]),e.orderStatusIsOne?[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.remark,expression:"remark"}],staticClass:"input form-item",attrs:{placeholder:"可留下您的支付账号，以便核对",rows:"3"},domProps:{value:e.remark},on:{input:function(t){t.target.composing||(e.remark=t.target.value)}}})]:[a("span",[e._v(e._s(e.detail.remark?e.detail.remark:"无"))])]],2)])])],1),e.orderStatusIsOne?a("van-button",{staticClass:"bottom-btn fixed-bottom",attrs:{type:"info"},on:{click:e.handleSubmit}},[e._v("确认提交")]):e._e()],1)},[],!1,null,"2cec7f5c",null);e.default=l.exports},a18c:function(t,e,a){},ad04:function(t,e,a){"use strict";var n=a("edf6");a.n(n).a},edf6:function(t,e,a){}}]);